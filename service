#!/usr/bin/python
from hosted import device, node, config

# Pins to monitor
PINS = {
    "POWER": 18,
    "UP": 23,
    "DOWN": 22,
    "MENU": 4,
    "SELECT": 24
}

config.restart_on_update()
device.gpio.monitor(list(PINS.values()))

for pin, state in device.gpio.poll_forever():
    # Send a separate message for each button
    if pin == PINS["POWER"]:
        node.send('/power:%d' % state)
    elif pin == PINS["UP"]:
        node.send('/up:%d' % state)
    elif pin == PINS["DOWN"]:
        node.send('/down:%d' % state)
    elif pin == PINS["MENU"]:
        node.send('/menu:%d' % state)
    elif pin == PINS["SELECT"]:
        node.send('/select:%d' % state)
